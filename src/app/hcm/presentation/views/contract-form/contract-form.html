<app-layout-nursing-home>
  <h1 class="title">{{ 'Create New Contract' | translate }}</h1>

  <div class="form-wrapper">
    <form [formGroup]="form" (ngSubmit)="submit()" class="contract-form">

      <!-- Contract Information Section -->
      <div class="section-divider">
        <mat-icon>description</mat-icon>
        <span>{{ 'Contract Information' | translate }}</span>
      </div>

      <div class="info-grid">
        <mat-card class="full-width-card">
          <div class="card-header-custom">
            <div class="icon-wrapper">
              <mat-icon>event</mat-icon>
            </div>
            <h3>{{ 'Contract Dates' | translate }}</h3>
          </div>
          <div class="card-body">
            <div class="calendar-section">
              <!-- Start Date Calendar -->
              <div class="calendar-wrapper">
                <label class="calendar-label">
                  {{ 'Start Date' | translate }}
                  <span class="required">*</span>
                </label>
                <mat-calendar
                  [selected]="form.get('startDate')?.value"
                  (selectedChange)="onStartDateChange($event)">
                </mat-calendar>
                @if (form.get('startDate')?.value) {
                  <div class="selected-date-display">
                    <mat-icon>check_circle</mat-icon>
                    <span>{{ form.get('startDate')?.value | date:'mediumDate' }}</span>
                  </div>
                }
                @if (form.get('startDate')?.touched && form.get('startDate')!.hasError('required')) {
                  <mat-error class="calendar-error">{{ 'Start date is required' | translate }}</mat-error>
                }
              </div>

              <!-- End Date Calendar -->
              <div class="calendar-wrapper">
                <label class="calendar-label">
                  {{ 'End Date' | translate }}
                  <span class="required">*</span>
                </label>
                <mat-calendar
                  [selected]="form.get('endDate')?.value"
                  (selectedChange)="onEndDateChange($event)">
                </mat-calendar>
                @if (form.get('endDate')?.value) {
                  <div class="selected-date-display">
                    <mat-icon>check_circle</mat-icon>
                    <span>{{ form.get('endDate')?.value | date:'mediumDate' }}</span>
                  </div>
                }
                @if (form.get('endDate')?.touched && form.get('endDate')!.hasError('required')) {
                  <mat-error class="calendar-error">{{ 'End date is required' | translate }}</mat-error>
                }
              </div>
            </div>
          </div>
        </mat-card>
      </div>

      <!-- Contract Details Section -->
      <div class="section-divider">
        <mat-icon>assignment</mat-icon>
        <span>{{ 'Contract Details' | translate }}</span>
      </div>

      <div class="info-grid">
        <mat-card class="info-card">
          <div class="card-header-custom">
            <div class="icon-wrapper">
              <mat-icon>work</mat-icon>
            </div>
            <h3>{{ 'Type of Contract' | translate }}</h3>
          </div>
          <div class="card-body">
            <mat-form-field appearance="outline">
              <mat-label>{{ 'Select Contract Type' | translate }}</mat-label>
              <mat-select formControlName="typeOfContract">
                <mat-option value="Full-time">{{ 'Full-time' | translate }}</mat-option>
                <mat-option value="Part-time">{{ 'Part-time' | translate }}</mat-option>
                <mat-option value="Temporary">{{ 'Temporary' | translate }}</mat-option>
                <mat-option value="Freelance">{{ 'Freelance' | translate }}</mat-option>
              </mat-select>
              @if (form.get('typeOfContract')?.touched && form.get('typeOfContract')!.hasError('required')) {
                <mat-error>{{ 'Contract type is required' | translate }}</mat-error>
              }
            </mat-form-field>
          </div>
        </mat-card>

        <mat-card class="info-card">
          <div class="card-header-custom">
            <div class="icon-wrapper">
              <mat-icon>badge</mat-icon>
            </div>
            <h3>{{ 'Staff Role' | translate }}</h3>
          </div>
          <div class="card-body">
            <mat-form-field appearance="outline">
              <mat-label>{{ 'Select Role' | translate }}</mat-label>
              <mat-select formControlName="staffRole">
                <mat-option value="NURSE">{{ 'Nurse' | translate }}</mat-option>
                <mat-option value="CAREGIVER">{{ 'Caregiver' | translate }}</mat-option>
                <mat-option value="DOCTOR">{{ 'Doctor' | translate }}</mat-option>
                <mat-option value="ADMINISTRATIVE">{{ 'Administrator' | translate }}</mat-option>
                <mat-option value="COOK">{{ 'Cook' | translate }}</mat-option>
              </mat-select>
              @if (form.get('staffRole')?.touched && form.get('staffRole')!.hasError('required')) {
                <mat-error>{{ 'Staff role is required' | translate }}</mat-error>
              }
            </mat-form-field>
          </div>
        </mat-card>
      </div>

      <!-- Work Shift Section -->
      <div class="section-divider">
        <mat-icon>schedule</mat-icon>
        <span>{{ 'Work Schedule' | translate }}</span>
      </div>

      <div class="info-grid">
        <mat-card class="full-width-card">
          <div class="card-header-custom">
            <div class="icon-wrapper">
              <mat-icon>access_time</mat-icon>
            </div>
            <h3>{{ 'Work Shift' | translate }}</h3>
          </div>
          <div class="card-body">
            <mat-form-field appearance="outline">
              <mat-label>{{ 'Select Shift' | translate }}</mat-label>
              <mat-select formControlName="workShift">
                <mat-option value="DAY">{{ 'Morning (6:00 AM - 2:00 PM)' | translate }}</mat-option>
                <mat-option value="NIGHT">{{ 'Afternoon (2:00 PM - 10:00 PM)' | translate }}</mat-option>
                <mat-option value="DAWN">{{ 'Night (10:00 PM - 6:00 AM)' | translate }}</mat-option>
              </mat-select>
              @if (form.get('workShift')?.touched && form.get('workShift')!.hasError('required')) {
                <mat-error>{{ 'Work shift is required' | translate }}</mat-error>
              }
            </mat-form-field>
          </div>
        </mat-card>
      </div>

      <div class="space"></div>

      <div class="action-buttons">
        <button mat-raised-button color="primary" type="button" (click)="onCancel()">
          <mat-icon>cancel</mat-icon>
          {{ 'Cancel' | translate }}
        </button>

        <button mat-raised-button color="accent" type="submit">
          <mat-icon>save</mat-icon>
          {{ 'Create Contract' | translate }}
        </button>
      </div>
    </form>
  </div>
</app-layout-nursing-home>
